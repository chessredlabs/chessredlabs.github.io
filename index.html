<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Chess Red — 6 Perguntas</title>
<style>
  body{font-family:Inter,system-ui,Arial;background:#071026;color:#e6eef8;padding:18px}
  .wrap{max-width:880px;margin:0 auto}
  h1{margin:0 0 8px;font-size:22px}
  .muted{color:#93a0b6;font-size:13px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin:14px 0}
  .card{background:#0b1220;border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:12px}
  .side{display:flex;flex-direction:column;gap:6px}
  .title{font-weight:700;margin-bottom:6px}
  .piece{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:700}
  .red{background:#ffdede;color:#4b0b0b}
  .blue{background:#dbe9ff;color:#032a5e}
  .dead{opacity:.35;text-decoration:line-through}
  .qbox{background:#071126;border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:12px}
  .big{font-size:18px;font-weight:700}
  .opts{display:flex;flex-direction:column;gap:8px;margin-top:10px}
  button.opt{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,.08);background:#10233d;color:#eaf2ff;cursor:pointer}
  button.opt:disabled{opacity:.5;cursor:not-allowed}
  .status{margin-top:12px;background:#071126;border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:10px}
  .ok{color:#aee6b0}
  .danger{color:#ffb4b4}
  .center{text-align:center}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
</style>
</head>
<body>
<div class="wrap">
  <h1>Chess Red — 6 Perguntas</h1>
  <div class="muted">Acertos removem peças azuis; erros removem suas peças. Precisa de <b>4/6</b> acertos e <b>não errar o Rei</b>.</div>

  <div class="grid">
    <div class="card">
      <div class="title">Red (você)</div>
      <div id="red_pawn"   class="piece red">PEÃO</div>
      <div id="red_bishop" class="piece red">BISPO</div>
      <div id="red_knight" class="piece red">CAVALO</div>
      <div id="red_rook"   class="piece red">TORRE</div>
      <div id="red_queen"  class="piece red">RAINHA</div>
      <div id="red_king"   class="piece red">REI</div>
    </div>
    <div class="card">
      <div class="title">Blue (inimigo)</div>
      <div id="blue_pawn"   class="piece blue">PEÃO</div>
      <div id="blue_bishop" class="piece blue">BISPO</div>
      <div id="blue_knight" class="piece blue">CAVALO</div>
      <div id="blue_rook"   class="piece blue">TORRE</div>
      <div id="blue_queen"  class="piece blue">RAINHA</div>
      <div id="blue_king"   class="piece blue">REI</div>
    </div>
  </div>

  <div class="qbox">
    <div id="qtitle" class="big">Pergunta 1 de 6</div>
    <div id="qtext" style="margin-top:6px"></div>
    <div id="opts" class="opts"></div>
  </div>

  <div class="status">
    <div><b>Acertos:</b> <span id="hits">0</span> / 6 &nbsp;&nbsp; <b>Erros:</b> <span id="errs">0</span></div>
    <div id="msg" style="margin-top:6px"></div>
    <div class="row" style="margin-top:8px">
      <button id="reset" class="opt">Reiniciar</button>
    </div>
  </div>
</div>

<script>
(function(){
  // 6 perguntas (PT) — todas MCQ. Ordem das peças: pawn, bishop, knight, rook, queen, king
  const QUESTIONS = [
    { piece:'pawn',   text:'1) Recon inicial: melhor primeira ação para mapear superfície pública?', 
      opts:['Scan agressivo em todo IP range','Mapear pegadas públicas (DNS, certificados, repositórios)','Phishing imediato','Brute-force de contas'], correct:1 },
    { piece:'bishop', text:'2) Encontrou token em repositório antigo (backup). Próximo passo responsável?', 
      opts:['Usar o token para avançar','Correlacionar com artefatos e validar origem/escopo','Publicar o token para alertar','Ignorar por ora'], correct:1 },
    { piece:'knight', text:'3) Indícios de SSRF. O que investigar primeiro?', 
      opts:['Acesso a metadata 169.254.169.254 / serviços internos','Desligar o servidor de produção','Aumentar timeouts HTTP','Trocar o banco de dados'], correct:0 },
    { piece:'rook',   text:'4) Perímetro: qual combinação é mais eficaz para reduzir risco imediatamente?', 
      opts:['Abrir portas para acelerar testes','Segmentação + hardening + regras WAF','Ignorar TLS em ambiente interno','Permitir admin exposto publicamente'], correct:1 },
    { piece:'queen',  text:'5) Incidente em vários serviços: qual priorização é mais adequada?', 
      opts:['Parar tudo sem análise','Focar em ativos críticos e conter movimento lateral','Publicar publicamente antes da contenção','Ignorar alertas que não são críticos'], correct:1 },
    { piece:'king',   text:'6) (Rei) Como provar ao board que a campanha Red demonstrou risco estratégico?', 
      opts:['Listar exploits sem impacto','Evidenciar impacto em ativos críticos, cadeia de pivôs e recomendações executáveis (com evidências)','Divulgar falhas publicamente','Entregar apenas logs brutos'], correct:1 }
  ];

  const el = id => document.getElementById(id);
  let idx = 0, hits = 0, errs = 0, finished = false, kingCorrect = null;

  function renderQ(){
    const q = QUESTIONS[idx];
    el('qtitle').textContent = `Pergunta ${idx+1} de ${QUESTIONS.length} — (${nomePeca(q.piece)})`;
    el('qtext').textContent  = q.text;
    const opts = el('opts'); opts.innerHTML = '';
    q.opts.forEach((o,i)=>{
      const b = document.createElement('button');
      b.className = 'opt';
      b.textContent = o;
      b.onclick = ()=>answer(i);
      opts.appendChild(b);
    });
    updateHUD('');
  }

  function nomePeca(p){
    return {pawn:'Peão', bishop:'Bispo', knight:'Cavalo', rook:'Torre', queen:'Rainha', king:'Rei'}[p] || p;
  }

  function answer(choice){
    if(finished) return;
    const q = QUESTIONS[idx];
    const correct = (choice === q.correct);

    if(correct){
      hits++;
      killBlue(q.piece);
      if(q.piece === 'king') kingCorrect = true;
      updateHUD(`<span class="ok">Correto — ${nomePeca(q.piece)} azul eliminado.</span>`);
    }else{
      errs++;
      killRed(q.piece);
      if(q.piece === 'king'){ // Rei não pode errar
        end(false, 'Você errou a pergunta do Rei — Game Over.');
        return;
      }
      updateHUD(`<span class="danger">Errado — ${nomePeca(q.piece)} vermelho eliminado.</span>`);
    }

    idx++;
    if(idx >= QUESTIONS.length){
      // fim: precisa de 4+ acertos e rei correto
      const win = (hits >= 4) && (kingCorrect === true);
      end(win, win ? 'Vitória! Você atingiu 4/6 (ou mais) e acertou o Rei.' : 'Derrota. São necessários 4/6 acertos e acertar o Rei.');
    }else{
      setTimeout(renderQ, 700);
    }
  }

  function killBlue(piece){
    const e = el('blue_'+piece);
    if(e){ e.classList.add('dead'); e.textContent = e.textContent + ' ✖'; }
  }
  function killRed(piece){
    const e = el('red_'+piece);
    if(e){ e.classList.add('dead'); e.textContent = e.textContent + ' ✖'; }
  }

  function updateHUD(msg){
    el('hits').textContent = hits;
    el('errs').textContent = errs;
    if(msg) el('msg').innerHTML = msg;
  }

  function end(victory, message){
    finished = true;
    // desabilita opções
    document.querySelectorAll('button.opt').forEach(b=>b.disabled = true);
    el('msg').innerHTML = (victory? `<span class="ok">${message}</span>` : `<span class="danger">${message}</span>`);
  }

  el('reset').addEventListener('click', ()=>location.reload());

  // init
  renderQ();
})();
</script>
</body>
</html>
